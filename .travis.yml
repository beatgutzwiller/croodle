---
# TravisCI is only used for BrowserStack tests.
# All other tests are run as GitHub Actions.

language: node_js
node_js:
  - "10"

dist: xenial

addons:
  chrome: stable

cache:
  yarn: true

env:
  global:
    - "BROWSERSTACK_USERNAME=jeldrikhanschke1"
    - "BROWSERSTACK_ACCESS_KEY=xaM9Uxurv2GyxFLKQXgj"
    # See https://git.io/vdao3 for details.
    - JOBS=1

branches:
  only:
    - master

before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash
  - export PATH=$HOME/.yarn/bin:$PATH

before_script:
  # create a browser stack tunnel for cross-browser testing
  - node_modules/ember-cli/bin/ember browserstack:connect

script:
  # run tests on BrowserStack
  - yarn test:ember --config-file testem.browserstack.js

after_script:
  # destroy the sauce tunnel
  - inode_modules/ember-cli/bin/ember browserstack:disconnect
